<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Lecture et parsing d'un fichier JSON</title>
    <style>
      #zone {
        width: 300px;
        height: 315px;
        border-style: solid;
        border-width: 3px;
        border-color: black;
      }
    </style>
  </head>
  <body>
<!--
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
-->
    <script src="jquery.js"></script>
    <h2>Lecture et parsing du fichier test.json</h2>
    <button id="lecture">Vérification du client</button>
    <div id="zone"></div>
    <script>
      var pseudo = prompt('Quel est votre nom ?');  
      $(function() {
        $('#lecture').on('click', function(){
          $.getJSON('tickets.json',function(data){
              var clients_list = [];
              for (var o = 0; o <= data.register_sales.length - 1; o++) {
                clients_list.push(data.register_sales[o].customer_name);
              };
              
              //clients_list.push(data.register_sales[0].customer_name)
              console.log(clients_list);
              if (clients_list.indexOf(pseudo) >= 0) {
              //if (clients_list[0] in clients_list) {
                  console.log('Vous êtes un client!');
                  alert('Vous êtes un client!');
              } else {
                  console.log('Vous n\'êtes pas encore un client!');
                  alert('Vous n\'êtes pas encore un client!');
              };
          });
        });
      });
    </script>
  </body>
</html>